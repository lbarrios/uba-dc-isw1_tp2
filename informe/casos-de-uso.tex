\subsection{Casos de Uso}

\captionsetup[table]{name=Caso de uso}

\newcommand{\curef}[1]{\textbf{Caso de uso \ref{cu:#1}}}
\newcommand{\cutitle}[1]{\renewcommand{\givencutitle}{#1}}
\newcommand{\cuactors}[1]{\renewcommand{\givencuactors}{#1}}
\newcommand{\cupre}[1]{\renewcommand{\givencupre}{#1}}
\newcommand{\cupost}[1]{\renewcommand{\givencupost}{#1}}
\newcommand{\cucourse}[1]{\renewcommand{\givencucourse}{#1}}
\newcommand{\culabel}[1]{\renewcommand{\givenculabel}{#1}}
\newcommand{\cucaption}[1]{\renewcommand{\givencucaption}{#1}}
\newcommand{\givencutitle}{REQUIRED!}
\newcommand{\givencuactors}{REQUIRED!}
\newcommand{\givencupre}{-}
\newcommand{\givencupost}{-}
\newcommand{\givencucourse}{REQUIRED!}
\newcommand{\givenculabel}{REQUIRED!}
\newcommand{\givencucaption}{} % optional

\newenvironment{casodeuso}
{\begin{table}[H]}{%
\begin{tabular}{|p{0.5\linewidth} p{0.5\linewidth}|}\hline
\multicolumn{2}{|l|}{\textbf{Caso de Uso: \givencutitle}} \\
\multicolumn{2}{|l|}{\textbf{Actors:} \givencuactors} \\
\multicolumn{2}{|l|}{\textbf{Pre:} \givencupre} \\
\multicolumn{2}{|l|}{\textbf{Post:} \givencupost} \\ 
\vspace{1px}\textbf{Curso Normal} & \vspace{1px}\textbf{Curso Alternativo} \\ 
\givencucourse
\hline
\end{tabular}
\caption{\givencutitle}
\label{cu:\givenculabel}
\end{table}}
  
\begin{casodeuso}
  \cutitle{Registrándose}
  \cuactors{Cliente}
  \cupost{El cliente se encuentra registrado}
  \cucourse{
  1. El cliente ingresa su usuario y contraseña & \\
  2. El sistema valida que el usuario no exista. & 2.1 Si el usuario ya existe, mostrar mensaje e ir a 1. \\
  3. El sistema valida que la contraseña sea segura. & 3.1 Si la contraseña no es segura, informar al cliente e ir a 1 \\
  4. El cliente ingresa sus datos personales & \\
  5. Incluye CU: evaluando estado financiero & 5.1 Si el cliente tiene deudas, denegarle el registro. FIN CU. \\
  6. El cliente ingresa su dirección & \\
  7. Incluye CU: validando domicilio & 7.1 si el domicilio no es válido, mostrar mensaje e ir a 6.  \\
  8. Si el cliente desea: Incluye CU: Agregando datos de pago online & \\
  9. El cliente ingresa su mail & \\
  10. Incluye CU: enviando mail de bienvenida & \\
  11. El cliente ingresa al link de bienvenida & 11.1 Si luego de 10 días el usuario no ingresa al link de bienvenida, el registro se cancela, FIN CU.\\
  12. El sistema marca al usuario como validado & \\
  13. FIN CU & \\
  }
  \culabel{Registrandose}
\end{casodeuso}

\begin{casodeuso}
  \cutitle{Autenticándose}
  \cuactors{Cliente}
  \cupost{El cliente se encuentra autenticado}
  \cucourse{
    1. El cliente ingresa el usuario y la contraseña & \\
    2. El sistema verifica los datos ingresados por el cliente & \\
    3. El cliente es redirigido al portal de bienvenida & 3.1 Si los datos son inválidos, se muestra un mensaje de error \\
    4. FIN CU & 4.1 FIN CU\\
  }
  \culabel{Autenticandose}
\end{casodeuso}

